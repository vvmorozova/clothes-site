{% extends 'base.html' %}

<!-- {% block title%}About page{% endblock %} -->

{% block content %}
{% load static %}
    <!-- Contact Section Begin -->
    <section class="contact spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-6">
                    <div class="contact__text">
                        <div class="section-title">
                            <!-- <span>Information</span> -->
                                <h1>{{ question.question_text }}</h1>

                                <ul>
                                {% for choice in question.choice_set.all %}
                                    <li>{{ choice.choice_text }} -- {{ choice.votes }} голосов</li>
                                {% endfor %}
                                </ul>

                                <a href="{% url 'riddles:detail' question.id %}">Выбрать заново</a>
                            {%block scripts%}

                        {%block content%}
                        <canvas id="pie-chart" width="40%" height="30%"></canvas>
                        <canvas id="line-chart" width="40%" height="30%"></canvas>
                        {%endblock content%}
                          <script>
new Chart("pie-chart", {
    type: 'pie',
    data: {
      labels: [{%for choice in question.choice_set.all%}'{{choice.choice_text}}',{%endfor%}],
      datasets: [{
        label: "ответы",
        backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9", "#e53637", "#673ab7", "#964B00"],
        data: [{%for choice in question.choice_set.all%}'{{choice.votes}}',{%endfor%}]
      }]
    },
    options: {
      title: {
        display: true,
        text: 'круговой график'
      }
    }
});
new Chart("line-chart", {
  type: 'line',
  data: {
    labels: [{%for choice in question.choice_set.all%}'{{choice.choice_text}}',{%endfor%}],
    datasets: [{
        data: [{%for choice in question.choice_set.all%}'{{choice.votes}}',{%endfor%}],
        label: "ответы",
        borderColor: "#3e95cd",
        fill: false
      },
    ]
  },
  options: {
    title: {
      display: true,
      text: 'Линейный график'
    }
  }
});
</script>
{%endblock scripts%}
                        </div>
                    </div>
                </div>

                <!-- <div class="col-lg-6 col-md-6">
                    <div class="contact__form"> -->
                        <!-- <form action="#">
                            <div class="row">
                                <div class="col-lg-6">
                                    <input type="text" placeholder="Имя">
                                </div>
                                <div class="col-lg-6">
                                    <input type="text" placeholder="Электронная почта">
                                </div>
                                <div class="col-lg-12">
                                    <textarea placeholder="Сообщение"></textarea>
                                </div>
                            </div>
                            <p>Ваш возраст: </p>
                            <input type="radio" name="age" value="10"> <p>< 18</p>
                            <input type="radio" name="age" value="20">
                            <button type="submit" class="site-btn">Отправить</button>
                        </form> -->
                        <!-- Create Form -->
                    <!-- </div>
                </div> -->
            </div>
        </div>
    </section>
    <!-- Contact Section End -->
    {% endblock %}